<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>testIMU.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">testIMU.c File Reference</div>  </div>
</div>
<div class="contents">

<p>Brief description needs to go here.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;sys/ioctl.h&gt;</code><br/>
<code>#include &lt;sys/poll.h&gt;</code><br/>
<code>#include &lt;sys/socket.h&gt;</code><br/>
<code>#include &lt;sys/time.h&gt;</code><br/>
<code>#include &lt;netinet/in.h&gt;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &quot;fcfutils.h&quot;</code><br/>
<code>#include &quot;testIMU.h&quot;</code><br/>
</div><table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="testIMU_8c.html#a1d5bf33e58f8e9877e3d4136cc6af2b9">readsocket</a> (int fd, char *buffer, int bufsize)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Recieve data from a socket for a file descriptor.  <a href="#a1d5bf33e58f8e9877e3d4136cc6af2b9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="testIMU_8c.html#ac717f11d3d8790e4af899f09cc2fa532">getsocket</a> (int serverport)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a socket to receive on.  <a href="#ac717f11d3d8790e4af899f09cc2fa532"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="testIMU_8c.html#ac6d61fb103e3cc19a51e478bbe198e9e">init_theo_imu</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes sockets to communicate with the IMU.  <a href="#ac6d61fb103e3cc19a51e478bbe198e9e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="testIMU_8c.html#a3afbb145901a94026f67157485fe942a">fileA_handler</a> (int fd, char *buffer, int bufsize)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This function handles a particular message type (fileA)  <a href="#a3afbb145901a94026f67157485fe942a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="testIMU_8c.html#aaf1670310c5089ff60e306216d323e7e">fileB_handler</a> (int fd, char *buffer, int bufsize)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This function handles a particular message type (fileB)  <a href="#aaf1670310c5089ff60e306216d323e7e"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Brief description needs to go here. </p>
<p>More detailed desciption needs to go here </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Ron Astin </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>February 5th, 2013 </dd></dl>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="a3afbb145901a94026f67157485fe942a"></a><!-- doxytag: member="testIMU.c::fileA_handler" ref="a3afbb145901a94026f67157485fe942a" args="(int fd, char *buffer, int bufsize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fileA_handler </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bufsize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function handles a particular message type (fileA) </p>
<p>This function hides all of the ugly work of getting "The Message" off of the hardware device. Every hardware interfacing module that sends messages will have specific callback functions for each message type to send. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>File descriptor </td></tr>
    <tr><td class="paramname">buffer</td><td>Contents of character buffer </td></tr>
    <tr><td class="paramname">bufsize</td><td>Size/length of buffer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aaf1670310c5089ff60e306216d323e7e"></a><!-- doxytag: member="testIMU.c::fileB_handler" ref="aaf1670310c5089ff60e306216d323e7e" args="(int fd, char *buffer, int bufsize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fileB_handler </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bufsize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function handles a particular message type (fileB) </p>
<p>This function hides all of the ugly work of getting "The Message" off of the hardware device. Every hardware interfacing module that sends messages will have specific callback functionsfor each message type to send. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>File Descriptor </td></tr>
    <tr><td class="paramname">buffer</td><td>Contents of character buffer </td></tr>
    <tr><td class="paramname">bufsize</td><td>Size/length of buffer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac717f11d3d8790e4af899f09cc2fa532"></a><!-- doxytag: member="testIMU.c::getsocket" ref="ac717f11d3d8790e4af899f09cc2fa532" args="(int serverport)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int getsocket </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>serverport</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a socket to receive on. </p>
<p>Create an AF_INET stream socket to receive incoming connections on. We bind the cocket, then set the listen backlog, then accept each incoming connection. If the accept fails with EWOULDBLOCK, then we have accepted all connections. Any other failure on accept will cause us to end the server. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">serverport</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac6d61fb103e3cc19a51e478bbe198e9e"></a><!-- doxytag: member="testIMU.c::init_theo_imu" ref="ac6d61fb103e3cc19a51e478bbe198e9e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_theo_imu </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initializes sockets to communicate with the IMU. </p>
<p>Starts by removing all file descriptors that were added under the "IMU" source token [place code snippet here]. After removing the file descriptors, we add the fild descriptors from socket 8081, and 8082 with the IMU token. </p>

</div>
</div>
<a class="anchor" id="a1d5bf33e58f8e9877e3d4136cc6af2b9"></a><!-- doxytag: member="testIMU.c::readsocket" ref="a1d5bf33e58f8e9877e3d4136cc6af2b9" args="(int fd, char *buffer, int bufsize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int readsocket </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bufsize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Recieve data from a socket for a file descriptor. </p>
<p>Receive data on this connection until the recv fails with EWOULDBLOCK. If any other failur occures, we will termintate the connection </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">fd</td><td>File Descriptor </td></tr>
    <tr><td class="paramname">buffer</td><td>Contents of character buffer </td></tr>
    <tr><td class="paramname">bufsize</td><td>Size/length of buffer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Fri Feb 8 2013 16:42:15 by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
